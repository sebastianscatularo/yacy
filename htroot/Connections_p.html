<!DOCTYPE html>
<html lang="en">
<head>
  <title>YaCy '#[clientname]#': Server Connection Tracking</title>
  #%env/templates/header-backend.template%#
  <script type="text/javascript" src="/js/yaml/tablesorter/jquery.tablesorter.min.js"></script>
  <meta http-equiv="REFRESH" content="3" />
</head>

<body id="connections">
  #%env/templates/page-start.template%#

  <div id="devInfo" data-done="html5" data-todo="code">
    data should be retrieved as JSON/XML and updated via JS to avoid page refreshes
  </div>

  <h1>Server Connection Tracking</h1>
  <h2>Incoming Connections</h2>
  <p>
    Showing <code>#[numActiveRunning]#</code> active, <code>#[numActivePending]#</code> pending connections from a maximum of <code>#[numMax]#</code> allowed incoming connections.
  </p>
  <table class="sortable">
    <thead>
      <tr>
        <th>Protocol</th>
        <th>Duration</th>
        <th>Source IP[:Port]</th>
        <th>Dest. IP[:Port]</th>
        <th>Command</th>
        <th>Used</th>
        <th>Close</th>
      </tr>
    </thead>
    <tbody>
      #{list}#
      <tr class="TableCell#(dark)#Light::Dark::Summary#(/dark)#" title="#[sessionName]#">
        <td>#[proto]#</td>
        <td>#(ms)##[duration]#::#[duration]# ms#(/ms)#</td>
        <td>#[source]#</td>
        <td>#[dest]#</td>
        <td>#(running)#Waiting for new request nr. # #[reqNr]#::#[command]##(/running)#</td>
        <td>#[used]#</td>
        <td><a href="Connections_p.html?closeServerSession=#[serverSessionID]#">[Close]</a></td>
      </tr>
      #{/list}#
    </tbody>
  </table>

  <h2>Outgoing Connections</h2>
  <p>
    Showing <code>#[clientActive]#</code> pooled outgoing connections used as:
  </p>
  <table class="sortable">
    <thead>
      <tr>
        <th>Protocol</th>
        <th>Duration</th>
        <th>Up-Bytes</th>
        <th>Dest. IP[:Port]</th>
        <th>Command</th>
        <th>ID</th>
      </tr>
    </thead>
    <tbody>
      #{clientList}#
      <tr class="TableCell#(dark)#Light::Dark#(/dark)#">
        <td>#[clientProtocol]#</td>
        <td>#[clientLifetime]#</td>
        <td>#[clientUpbytes]#</td>
        <td>#[clientTargetHost]#</td>
        <td>#[clientCommand]#</td>
        <td>#[clientID]#</td>
      </tr>
      #{/clientList}#
    </tbody>
  </table>

  #%env/templates/page-end.template%#
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <title>YaCy '#[clientname]#': Configuration of a phpBB3 Search</title>
  #%env/templates/header-backend.template%#
  <script type="text/javascript">
    YaCyPage.init = function() {
      YaCyPage.addValidators();
    }
  </script>
  <script type="text/javascript" src="/js/yaml/pages/shared/crawlLoad.js"></script>
</head>

<body id="loadPhpBb3">
#%env/templates/page-start.template%#

<div id="devInfo">
Todo:
 - jQuery UI tooltips not working
 - handle robots not allowed
 status: valid html5
</div>

        <h1>Integration in phpBB3</h1>
        <p>
          It is possible to insert forum pages into the YaCy index using a database import of forum postings.
          This guide helps you to insert a search window in your phpBB3 pages.
        </p>

        <h2>Retrieval of phpBB3 Forum Pages using a database export</h2>
        <p>
          Forum posting contain rich information about the topic, the time, the subject and the author.
          This information is in an bad annotated form in web pages delivered by the forum software.
          It is much better to retrieve the forum postings directly from the database. This will cause that YaCy is able to offer nice navigation features after searches.
          YaCy has a phpBB3 extraction feature, please go to the <a href="ContentIntegrationPHPBB3_p.html">phpBB3 content integration</a> servlet for direct database imports.
        </p>

        <h2>Retrieval of phpBB3 Forum Pages using a web crawl</h2>
        <p>
          The following form is a simplified crawl start that uses the proper values for a phpbb3 forum crawl.
          Just insert the front page URL of your forum. After you started the crawl you may want to get back
          to this page to read the integration hints below.
        </p>

        <form action="Crawler_p.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
          <fieldset>
            <legend>phpBB3</legend>
            <fieldset id="startPoint" class="formGroup">
              <legend>Start Point</legend>
              <div class="description">
                <p>
                  The URL of the phpBB3 forum main page is the start-point for your crawl.
                </p>
              </div>
              <fieldset class="formSection">
                <legend>Main page</legend>
                <div class="content">
                  <input type="text" name="crawlingURL" id="crawlingURL" value="#[starturl]#" maxlength="256"/>
                  <div class="formHint hidden">
                    <p class="ok">
                      The entered location looks correct.
                    </p>
                    <p class="error" data-id="protocol">
                      The entered URL is not valid. Only <code>HTTP</code> protocol URLs are allowed.
                    </p>
                    <p class="error" data-id="invalid">
                      The entered URL is not valid.
                    </p>
                    <p class="error" data-id="empty">
                      You need to enter a URLs to start your crawl.
                    </p>
                    <p class="help">
                      Please define a start-url for your crawl.
                    </p>
                  </div>
                </div>
              </fieldset>
            </fieldset>

            <input type="hidden" name="crawlingMode" value="url"/>
            <input type="hidden" name="createBookmark" value="off" />
            <input type="hidden" name="crawlingDepth" value="8" />
            <input type="hidden" name="mustmatch" value=".*" />
            <input type="hidden" name="mustnotmatch" value=".*memberlist.*|.*previous.*|.*next.*|.*start=.*|.*p=.*" />
            <input type="hidden" name="range" value="subpath" />
            <input type="hidden" name="crawlingIfOlderCheck" value="on"/>
            <input type="hidden" name="crawlingIfOlderNumber" value="1" />
            <input type="hidden" name="crawlingIfOlderUnit" value="day" />
            <input type="hidden" name="crawlingDomFilterCheck" value="off" />
            <input type="hidden" name="crawlingDomFilterDepth" value="0" />
            <input type="hidden" name="crawlingDomMaxCheck" value="off" />
            <input type="hidden" name="crawlingDomMaxPages"/>
            <input type="hidden" name="crawlingQ" value="on" />
            <input type="hidden" name="storeHTCache" value="off" />
            <input type="hidden" name="indexText" value="on" />
            <input type="hidden" name="indexMedia" value="on" />
            <input type="hidden" name="crawlOrder" value="off" />
            <input type="hidden" name="intention"/>
            <input type="hidden" name="xsstopw" value="off" />
            <input type="hidden" name="xdstopw" value="off" />
            <input type="hidden" name="xpstopw" value="off" />

            <fieldset class="formControl">
              <div id="ycuErrorCount" class="description hiddden"></div>
              <div class="content">
                <button type="submit" id="submitCrawlStart" class="primary icon-run">Start crawl job</button>
              </div>
            </fieldset>
          </fieldset>
        </form>

        <h2>Inserting a Search Window to phpBB3</h2>
        <p>
          To integrate a search window into phpBB3, you must insert some code into a forum template.
          There are several templates that can be used for phpBB3, but in this guide we consider that you are using the default template, 'prosilver':
        </p>
        <ul>
          <li>open styles/prosilver/template/overall_header.html</li>
          <li>find the line where the default search window is displayed, thats right behind the <code>&lt;div id="search-box"&gt;</code> statement</li>
          <li>
            Insert the following code right behind the div tag:
            <pre><code>
&lt;script src="http://#[address]#/yacy/ui/js/jquery-1.3.2.min.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;script&gt;
  $(document).ready(function() {
    yconf = {
      url : 'http://#[address]#/',
      title : 'YaCy Forum Search',
      width : 500,
      height : 600,
      position : ['top',30]
    };
    $.getScript(yconf.url+'/yacy/ui/js/yacyui-portalsearch.js', function(){return false;});
  });
&lt;/script&gt;
&lt;div id="yacylivesearch"&gt;
  &lt;form id="ysearch" method="get" accept-charset="UTF-8" action="http://#[address]#/yacysearch.html"&gt;
    &lt;input name="search" id="yquery" type="text" size="16" maxlength="128" title="{L_SEARCH_KEYWORDS}" class="inputbox search"/&gt;
    &lt;input type="hidden" name="verify" value="cacheonly" /&gt;
    &lt;input type="hidden" name="maximumRecords" value="10" /&gt;
    &lt;input type="hidden" name="resource" value="local" /&gt;
    &lt;input type="hidden" name="urlmaskfilter" value=".*" /&gt;
    &lt;input type="hidden" name="prefermaskfilter" /&gt;
    &lt;input type="hidden" name="display" value="2" /&gt;
    &lt;input type="hidden" name="nav" value="all" /&gt;
    &lt;input type="submit" name="Enter" value="Search" /&gt;
  &lt;/form&gt;YaCy Search
&lt;/div&gt;</code></pre>
          </li>
          <li>
            Check all appearances of static IPs given in the code snippet and replace it with your own IP, or your host name
          </li>
          <li>You may want to change the default text elements in the code snippet</li>
          <li>
            To see all options for the search widget, look at the more generic description of search widgets at the <a href="ConfigLiveSearch.html">configuration for live search</a>.
          </li>
        </ul>
  #%env/templates/page-end.template%#
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <title>YaCy '#[clientname]#': Wiki</title>
  #%env/templates/header-backend.template%#
  <script type="text/javascript" src="/js/yaml/tablesorter/jquery.tablesorter.min.js"></script>
  <script type="text/javascript" src="/js/yaml/pages/wiki.js"></script>
</head>

<body id="wiki">
  #%env/templates/page-start.template%#

  <div id="devInfo" data-done="html5 script"></div>

  #(mode)#
  <!-- 0: viewing -->
  <h1 class="numbered">YaCyWiki page: #[pagename]#</h1>
  #[page]#
  <p class="postInfo">
    last edited by #[author]# | change date #[date]# | <a href="Wiki.html?page=#[pagename]#&amp;edit=Edit">Edit</a> #(access)#(only granted to admin)::#(/access)#
  </p>
  <p class="navigation">
    <a href="Wiki.html" class="pointLeft">Start Page</a> -
    <a href="Wiki.html?index=Index">Index</a> -
    <a href="Wiki.html?page=#[pagename]#&amp;diff=">Versions</a>
  </p>
  <form method="post" action="Wiki.html" enctype="multipart/form-data" accept-charset="UTF-8">
    <div>
      <label for="access">Grant Write Access to</label>
      #(access)#<button type="submit" name="access" value="all" class="icon-user">All</button>::<button type="submit" name="access" value="admin" class="icon-user">Admin</button>#(/access)#
    </div>
  </form>
  ::<!-- 1: edit -->
  <h1>Edit</h1>
  <form action="Wiki.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Page: <em>#[pagename]#</em></legend>
      <fieldset class="formSection">
        <legend>Author</legend>
        <div class="content">
          <input name="author" id="author" type="text" maxlength="80" value="#[author]#"/>
          <div class="formHint hidden">
            <p class="warning">
              Author will be set to <code>anonymous</code>.
            </p>
          </div>
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Text</legend>
        <div class="content">
          <textarea name="content">#[page-code]#</textarea>
          <p class="help">
            <s class="sym sym-hint"></s>
            You can use <a href="WikiHelp.html" data-id="wikiHelp">Wiki Code</a> here.
          </p>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="content">
          <input type="hidden" name="page" value="#[pagename]#" />
          <input type="hidden" name="reason" value="edit" />
          <button type="submit" name="view" class="icon-revert">Discard</button>
          <button type="submit" name="preview" class="icon-showMore">Preview</button>
          <button type="submit" name="submit" class="primary icon-save">Save</button>
        </div>
      </fieldset>

    </fieldset>
  </form>
  <p>
    <s class="sym sym-hint"></s>
    Changes will be published as announcement on YaCyNews
  </p>
  ::<!-- 2: preview -->
  <h1>Preview</h1>
  <p>
    <s class="sym sym-warning"></s>
    No changes have been submitted so far!
  </p>
  <form action="Wiki.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Preview</legend>
      <div class="content noIndent padded">
        <h2>YaCyWiki page: #[pagename]#</h2>
        #[page]#
        <p class="postInfo">
          last edited by #[author]# | change date #[date]#
        </p>
      </div>
      <fieldset class="formControl">
        <div class="content">
          <button type="submit" name="view" class="icon-revert">Discard</button>
          <button type="submit" name="submit" class="primary icon-save">Save</button>
        </div>
      </fieldset>
    </fieldset>

    <h2 class="numbered">Edit</h2>
    <fieldset class="main">
      <legend>Edit page</legend>
      <fieldset class="formSection">
        <legend>Author</legend>
        <div class="content">
          <input name="author" id="author" type="text" maxlength="80" value="#[author]#" />
          <div class="formHint hidden">
            <p class="warning">
              Author will be set to <code>anonymous</code>.
            </p>
          </div>
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Text</legend>
        <div class="content">
          <textarea name="content">#[page-code]#</textarea>
          <p>
            <s class="sym sym-hint"></s>
            You can use <a href="WikiHelp.html" data-id="wikiHelp">Wiki Code</a> here.
          </p>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="content">
          <input type="hidden" name="page" value="#[pagename]#" />
          <input type="hidden" name="reason" value="edit" />
          <button type="submit" name="view" class="icon-revert">Discard</button>
          <button type="submit" name="preview" class="icon-showMore">Update preview</button>
          <button type="submit" name="submit" class="primary icon-save">Save</button>
        </div>
      </fieldset>
    </fieldset>
  </form>
  <p>
    <s class="sym sym-hint"></s>
    Changes will be published as announcement on YaCyNews
  </p>
  ::
  <!-- 3: Index -->
  <h1>Index</h1>
  <table class="sortable">
    <thead>
      <tr>
        <th>Subject</th>
        <th>Change Date</th>
        <th>Last Author</th>
      </tr>
    </thead>
    <tbody>
      #{pages}#
      <tr>
        <td><a href="Wiki.html?page=#[name]#">#[subject]#</a></td>
        <td>#[date]#</td>
        <td>#[author]#</td>
      </tr>
      #{/pages}#
    </tbody>
  </table>
  #(error)#::
  <p class="ycu-message ycu-message-error">
    <span class="header">IO Error reading wiki database:</span>
    <span class="content">#[message]#</span>
  </p>
  #(/error)#
  <p class="navigation">
    <a href="Wiki.html" class="pointLeft">Start Page</a>
  </p>
  ::
  <!-- 4: Diff -->
  <h1>Versions</h1>
  #(error)#<!-- no error -->
  <form method="get" action="Wiki.html#partPreview" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Select versions of page <em>#[page]#</em></legend>
      <input type="hidden" name="page" value="#[page]#" />
      <input type="hidden" name="diff"/>
      <fieldset class="formSection">
        <legend>Compare version from</legend>
        <div class="content">
          <select name="old">
            #{versions}#
            <option value="#[date]#"#(oldselected)#:: selected="selected"#(/oldselected)#>
              #[fdate]#
            </option>
            #{/versions}#
          </select>
          <button type="submit" name="viewold" class="plain pointRight">Show</button>
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>With version</legend>
        <div class="content">
          <select name="new">
            <optgroup label="current">
              <option value="#[curdate]#"#(curselected)#:: selected="selected"#(/curselected)#>
                #[curfdate]#
              </option>
            </optgroup>
            #{versions}#
            <option value="#[date]#"#(newselected)#:: selected="selected"#(/newselected)#>
              #[fdate]#
            </option>
            #{/versions}#
          </select>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="content">
          <button type="submit" name="compare" class="primary icon-run">Compare</button>
        </div>
      </fieldset>
    </fieldset>
  </form>
  ::<!-- IO error -->
  <h1>Error</h1>
  <p class="error">IO Error reading wiki database: #[message]#</p>
  ::<!-- no entries available for #[name]# -->
  #(/error)#
  #(versioning)#
  ::<!-- 1: View diff -->
  <a name="partPreview"></a>
  #[diff]#
  ::<!-- 2: View selected version -->
  <h1 id="partPreview">Preview</h1>
  <p>
    <s class="sym sym-warning"></s>
    No changes have been submitted so far!
  </p>
  <form action="Wiki.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset class="main">
      <legend>Preview</legend>
      <div class="content noIndent padded">
        <h2 class="PostSubject">YaCyWiki page: #[pagename]#</h2>
        #[page]#
        <p class="postInfo">
          last edited by #[author]# | change date #[date]#
        </p>
      </div>
      <fieldset class="formControl">
        <div class="content">
          <button type="submit" name="view" class="icon-revert">Discard</button>
          <button type="submit" name="submit" class="primary icon-save">Save</button>
        </div>
      </fieldset>
    </fieldset>
    <fieldset class="main">
      <legend>Edit</legend>
      <fieldset class="formSection">
        <legend>Author</legend>
        <div class="content">
          <input name="author" id="author" type="text" maxlength="80" value="#[author]#" />
          <div class="formHint hidden">
            <p class="warning">
              Author will be set to <code>anonymous</code>.
            </p>
          </div>
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Text</legend>
        <div class="content">
          <textarea name="content">#[page-code]#</textarea>
          <p>
            <s class="sym sym-hint"></s>
            You can use <a href="WikiHelp.html" data-id="wikiHelp">Wiki Code</a> here.
          </p>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="content">
          <input type="hidden" name="page" value="#[pagename]#"/>
          <input type="hidden" name="reason" value="edit"/>
          <button type="submit" name="view" class="icon-revert">Discard</button>
          <button type="submit" name="preview" class="icon-showMore">Preview</button>
          <button type="submit" name="submit" class="primary icon-save">Submit</button>
        </div>
      </fieldset>
    </fieldset>
  </form>
  #(/versioning)#
  <p class="navigation">
    <a href="Wiki.html" class="pointLeft">Start Page</a> -
    <a href="Wiki.html?page=#[page]#">Return to #[page]#</a>
  </p>
  #(/mode)#

  #%env/templates/page-end.template%#
</body>
</html>
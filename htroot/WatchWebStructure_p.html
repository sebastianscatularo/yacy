<!DOCTYPE html>
<html lang="en">
<head>
  <title>YaCy '#[clientname]#': Web Structure</title>
  #%env/templates/header-backend.template%#
  <link rel="stylesheet" media="screen" type="text/css" href="/js/yaml/minicolors/jquery.minicolors.css" />
  <script type="text/javascript" src="/js/yaml/minicolors/jquery.minicolors.min.js"></script>
  <script type="text/javascript" src="/js/WatchWebStructure.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      $('#colorback, #colortext, #colorline, #colordot0, #colordota, #colorlineend').minicolors();
    });
  </script>
</head>

<body id="watchWebStructure">
  #%env/templates/page-start.template%#

  <div id="api">
    <img src="env/grafics/api.png" width="60" height="40" alt="API" />
    <div>
      The data that is visualized here can also be retrieved in a <a href="/api/webstructure.xml?about=#[besthost]#">XML file</a>, which lists the reference relation between the domains.
      With a GET-property 'about' you get only reference relations about the host that you give in the argument field for 'about'.
      With a GET-property 'latest' you get a list of references that had been computed during the current run-time of YaCy, and with each next call only an update to the next list of references.
      Click the API icon to see the XML file.
      To see a list of all APIs, please visit the <a href="http://www.yacy-websuche.de/wiki/index.php/Dev:API">API wiki page</a>.
    </div>
  </div>

  <div id="devInfo">
    todo:
    - script
    - spinner should update page immediately (left old buttons there)
  </div>

  <h1>Web Structure</h1>
  #(hosts)#::
  <fieldset>
    <legend>Host List</legend>
    #{list}#
    <div style="float:left; padding:1px 5px 1px 5px;">
      <div style="width:160px; text-align:left; float: left; white-space:nowrap; overflow:hidden;"><a href="/WatchWebStructure_p.html?host=#[host]#&depth=3&time=1000">#[host]#</a></div>
      <div style="width:80px; text-align:right; float: left; white-space:nowrap; overflow:hidden;">#[count]# outlinks</div>
    </div>
    #{/list}#
  </fieldset>
  #(/hosts)#
  <form action="/WatchWebStructure_p.html" accept-charset="UTF-8" onsubmit="return checkform(this);">
    <fieldset>
      <legend>Settings</legend>
      <fieldset class="formSection">
        <legend>Host</legend>
        <div class="content">
          <input type="text" value="#[host]#" name="host" id="host" size="20" maxlength="80" />
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Depth</legend>
        <div class="content">
          <a href="WatchWebStructure_p.html?host=#[host]#&amp;depth=#[depthd]#&amp;width=#[width]#&amp;height=#[height]#&amp;nodes=#[nodes]#&amp;time=#[time]#&amp;colortext=#[colortext]#&amp;colorback=#[colorback]#&amp;colordot0=#[colordot0]#&amp;colordota=#[colordota]#&amp;colorline=#[colorline]#&amp;colorlineend=#[colorlineend]#"><img src="env/grafics/minus.gif" width="11" height="11" alt="minus"/></a>
          <input type="text" name="depth" value="#[depth]#" size="1" maxlength="1" class="spinner"/>
          <a href="WatchWebStructure_p.html?host=#[host]#&amp;depth=#[depthi]#&amp;width=#[width]#&amp;height=#[height]#&amp;nodes=#[nodes]#&amp;time=#[time]#&amp;colortext=#[colortext]#&amp;colorback=#[colorback]#&amp;colordot0=#[colordot0]#&amp;colordota=#[colordota]#&amp;colorline=#[colorline]#&amp;colorlineend=#[colorlineend]#"><img src="env/grafics/plus.gif" width="11" height="11" alt="plus" /></a>
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Nodes</legend>
        <div class="content">
          <a href="WatchWebStructure_p.html?host=#[host]#&amp;depth=#[depth]#&amp;width=#[width]#&amp;height=#[height]#&amp;nodes=#[nodesd]#&amp;time=#[time]#&amp;colortext=#[colortext]#&amp;colorback=#[colorback]#&amp;colordot0=#[colordot0]#&amp;colordota=#[colordota]#&amp;colorline=#[colorline]#&amp;colorlineend=#[colorlineend]#"><img src="env/grafics/minus.gif" width="11" height="11" alt="minus"/></a>
          <input type="text" name="nodes" value="#[nodes]#" size="4" maxlength="4" class="spinner"/>
          <a href="WatchWebStructure_p.html?host=#[host]#&amp;depth=#[depth]#&amp;width=#[width]#&amp;height=#[height]#&amp;nodes=#[nodesi]#&amp;time=#[time]#&amp;colortext=#[colortext]#&amp;colorback=#[colorback]#&amp;colordot0=#[colordot0]#&amp;colordota=#[colordota]#&amp;colorline=#[colorline]#&amp;colorlineend=#[colorlineend]#"><img src="env/grafics/plus.gif" width="11" height="11" alt="plus"/></a>
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Time</legend>
        <div class="content">
          <a href="WatchWebStructure_p.html?host=#[host]#&amp;depth=#[depth]#&amp;width=#[width]#&amp;height=#[height]#&amp;nodes=#[nodes]#&amp;time=#[timed]#&amp;colortext=#[colortext]#&amp;colorback=#[colorback]#&amp;colordot0=#[colordot0]#&amp;colordota=#[colordota]#&amp;colorline=#[colorline]#&amp;colorlineend=#[colorlineend]#"><img src="env/grafics/minus.gif" width="11" height="11" alt="minus"/></a>
          <input type="text" name="time" value="#[time]#" size="4" maxlength="4" class="spinner"/>
          <a href="WatchWebStructure_p.html?host=#[host]#&amp;depth=#[depth]#&amp;width=#[width]#&amp;height=#[height]#&amp;nodes=#[nodes]#&amp;time=#[timei]#&amp;colortext=#[colortext]#&amp;colorback=#[colorback]#&amp;colordot0=#[colordot0]#&amp;colordota=#[colordota]#&amp;colorline=#[colorline]#&amp;colorlineend=#[colorlineend]#"><img src="env/grafics/plus.gif" width="11" height="11" alt="plus"/></a>
        </div>
      </fieldset>
      <fieldset class="formGroup collapsible">
        <legend>Layout</legend>
        <fieldset class="formSection">
          <legend>Size</legend>
          <div class="content">
            Width: <input type="text" name="width" value="#[width]#" size="5" maxlength="5" />
            <br/>
            Height: <input type="text" name="height" value="#[height]#" size="5" maxlength="5" />
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Background color</legend>
          <div class="content">
            <input type="text" name="colorback" id="colorback" value="#[colorback]#" size="6" maxlength="6" />
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Text color</legend>
          <div class="content">
            <input type="text" name="colortext" id="colortext" value="#[colortext]#" size="6" maxlength="6" />
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Line color</legend>
          <div class="content">
            <input type="text" name="colorline" id="colorline" value="#[colorline]#" size="6" maxlength="6" />
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Pivot Dot color</legend>
          <div class="content">
            <input type="text" name="colordot0" id="colordot0" value="#[colordot0]#" size="6" maxlength="6" />
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Other Dot color</legend>
          <div class="content">
            <input type="text" name="colordota" id="colordota" value="#[colordota]#" size="6" maxlength="6" />
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Dot End color</legend>
          <div class="content">
            <input type="text" name="colorlineend" id="colorlineend" value="#[colorlineend]#" size="6" maxlength="6" />
          </div>
        </fieldset>
      </fieldset>
      <fieldset class="formControl" data-id="formControl">
        <div class="content">
          <button type="submit" class="primary icon-run">Change</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  <img id="WebPicture" src="WebStructurePicture_p.png?host=#[besthost]#&amp;depth=#[depth]#&amp;width=#[width]#&amp;height=#[height]#&amp;nodes=#[nodes]#&amp;time=#[time]#&amp;colortext=#[colortext]#&amp;colorback=#[colorback]#&amp;colordot0=#[colordot0]#&amp;colordota=#[colordota]#&amp;colorline=#[colorline]#&amp;colorlineend=#[colorlineend]#" alt="WebStructurePicture"/>
  #%env/templates/page-end.template%#
</body>
</html>

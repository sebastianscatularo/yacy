<!DOCTYPE html>
<!-- This page is only XHTML 1.0 Transitional and not Strict because iframes are in use -->
<html lang="en" >
<head>
  <title>YaCy '#[clientname]#': OAI-PMH Import</title>
  #%env/templates/header-backend.template%#
  #(import)#::
  <!--<meta http-equiv="REFRESH" content="10" />-->
  #(/import)#
  <script type="text/javascript">
    function showMessages() {
      $('#formResults').show();
    };
    //<![CDATA[
    $(function() {
      #(import-one)#::
      showMessages();
      ::
      showMessages();
      #(/import-one)#
      #(status)#::
      showMessages();
      ::
      showMessages();
      #(/status)#
    });
    //]]>
  </script>
</head>

<body id="indexImportOAIPMH">
  <ul class="ym-skiplinks">
    <li><a class="ym-skip" href="#nav">Skip to navigation (Press Enter)</a></li>
    <li><a class="ym-skip" href="#main">Skip to main content (Press Enter)</a></li>
  </ul>

  #%env/templates/header.template%#

  <main>
    <div class="ym-wrapper">
      <div class="ym-wbox">

        <div id="formResults" class="message hidden">
          #(import-one)#::
          <p class="success">
            <ul>
              <li><strong>Source:</strong> #[source]#</li>
              <li><strong>Processed:<strong> #[count]# records</li>
              <li><strong>ResumptionToken:</strong> #[rt]#</li>
            </ul>
          </p>
          ::
          <p class="error">
            <strong>Import failed:</strong> #[error]#
          </p>
          #(/import-one)#
          #(status)#::
          <p class="success">Import started!</p>
          ::
          <p class="error">
            <strong>Bad input data:</strong> #[message]#
          </p>
          #(/status)#
        </div>

        <h1>OAI-PMH Import</h1>
        <p>
          Results from the import can be monitored in the <a href="/CrawlResults.html?process=7">indexing results for surrogates</a>.
        </p>

        <form action="IndexImportOAIPMH_p.html#formResults" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
          <fieldset>
            <legend>Single request import</legend>
            <div class="description">
              <p>
                This will submit only a single request as given here to a OAI-PMH server and imports records into the index.
              </p>
            </div>
            <fieldset class="formSection">
              <legend>OAI-PMH source</legend>
              <div class="content">
                <input name="urlstartone" type="text" value="#[defaulturl]#"/>
              </div>
            </fieldset>
            <fieldset class="formControl" data-id="formControl">
              <div class="content">
                <button type="submit" name="submit" class="icon-run primary">Import OAI-PMH source</button>
              </div>
            </fieldset>
          </fieldset>
        </form>

        <form action="IndexImportOAIPMH_p.html#formResults" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
        <fieldset>
          <legend>Import all Records</legend>
          <div class="description">
            <p>
              Import all records from a server that follow according to resumption elements into index.
            </p>
          </div>
          <fieldset class="formSection">
            <legend>OAI-PMH source</legend>
            <div class="content">
              <input name="urlstart" type="text" value=""/>
            </div>
          </fieldset>
          <fieldset class="formControl" data-id="formControl">
            <div class="content">
              #(optiongetlist)#::
              <button name="getlist" type="submit" class="icon-run">Import from a list</button>
              #(/optiongetlist)#
              <button type="submit" name="importroot" class="icon-run primary">Import OAI-PMH source</button>
            </div>
          </fieldset>
        </fieldset>
      </form>

      <fieldset class="main">
        <legend>OAI-PMH Servers</legend>
        <div class="content noIndent">
          <iframe name="OAI-PMH_ImportList"
          src="/IndexImportOAIPMHList_p.html#(iframetype)#::?import=::?source=#(/iframetype)#"
          width="100%"
          height="420"
          frameborder="0"
          scrolling="auto"
          id="OAI-PMH_ImportList">
        </iframe>
        </div>
      </fieldset>
    </div>
  </div>
</main>

<footer class="hidden">
  #%env/templates/footer.template%#
</footer>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <title>YaCy '#[clientname]#': User Accounts</title>
  #%env/templates/header-backend.template%#
  <script type="text/javascript" src="/js/yaml/pages/configAccounts.js"></script>
</head>

<body id="configAccounts">
  #%env/templates/page-start.template%#

  <h1>User Administration</h1>

  <!-- Page 1: Results -->
  #(text)#::
  <p class="ycu-message ycu-message-info">User created: #[username]#</p>
  ::
  <p class="ycu-message ycu-message-info">User changed: #[username]#</p>
  #(/text)#

  #(error)#
  ::
  <p class="ycu-message ycu-message-error">Generic error.</p>
  ::
  <p class="ycu-message ycu-message-error">Passwords do not match.</p>
  ::
  <p class="ycu-message ycu-message-error">Username too short. Username must be &gt;= 4 Characters.</p>
  #(/error)#

  #(passwordNotSetWarning)#::
  <p class="ycu-message ycu-message-error">
    No password is set for the administration account.
    Please define a password for the admin account.
  </p>
  #(/passwordNotSetWarning)#

  <form action="ConfigAccounts_p.html" method="post" accept-charset="UTF-8">
    <fieldset>
      <legend>Admin Account</legend>
      <fieldset class="formSection">
        <legend>Localhost access</legend>
        <div class="content">
          <p>
            <input type="radio" name="access" id="access_localhost" value="localhost"#(localhost.checked)#:: checked="checked"#(/localhost.checked)# />
            <label for="access_localhost">Access from localhost without account</label>
          </p>
          <p>
            <s class="sym sym-hint"></s>
            Access to your peer from your own computer (localhost access) is granted. No need to configure an administration account.
          </p>
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Remote access</legend>
        <div class="content">
          <p>
            <input type="radio" name="access" id="access_account" value="account"#(account.checked)#:: checked="checked"#(/account.checked)# />
            <label for="access_account">Access only with qualified account</label>
          </p>
          <p>
            <s class="sym sym-hint"></s>
            You need this only if you want a remote access to your peer.
          </p>
        </div>
      </fieldset>
      <fieldset class="formGroup">
        <legend>Admin account details</legend>
        <fieldset class="formSection">
          <legend>User name</legend>
          <div class="content">
            <input type="text" name="adminuser" id="adminUser" value="#[defaultUser]#" maxlength="32" onFocus="document.getElementById('access_account').checked = true;"/>
            <div class="formHint hidden">
              <p class="error">
                You must specify a valid user name.
              </p>
            </div>
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Password</legend>
          <div class="content">
            <input type="password" name="adminpw1" id="adminPw1" value="" maxlength="1024" onFocus="document.getElementById('access_account').checked = true;"/>
            <div class="formHint hidden">
              <p class="error" data-id="empty">
                You must specify a password.
              </p>
            </div>
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Password repeat</legend>
          <div class="content">
            <input type="password" name="adminpw2" id="adminPw2" value="" maxlength="1024" onFocus="document.getElementById('access_account').checked = true;"/>
            <div class="formHint hidden">
              <p class="error" data-id="empty">
                You must retype the previous entered password.
              </p>
              <p class="error" data-id="notSame">
                The repeated password do not match the first one.
              </p>
            </div>
          </div>
        </fieldset>
      </fieldset>
      <fieldset class="formControl">
        <div id="ycu-error-count" class="description hiddden"></div>
        <div class="content">
          <button type="submit" name="setAdmin" id="submitAccount" class="primary icon-save">Define administrator</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  <form action="ConfigAccounts_p.html" accept-charset="UTF-8">
    <fieldset>
      <legend>User Accounts</legend>
      <fieldset class="formSection">
        <legend>Select user</legend>
        <div class="content">
          <select name="user" id="user">
            <option value="newuser">New user</option>#{users}#
            <option>#[user]#</option>#{/users}#
          </select>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="content">
          <button type="submit" name="delete_user" class="icon-delete">Delete user accont</button>
          <button type="submit" name="change_user" class="primary icon-edit">Edit user account</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  <form action="ConfigAccounts_p.html" method="post" accept-charset="UTF-8">
    <fieldset>
      <legend>Edit user: #[username]#</legend>
      <input type="hidden" name="current_user" value="#[current_user]#" />
      <fieldset class="formSection">
        <legend>Name</legend>
        <div class="content">
          <input type="text" id="username" name="username" value="#[username]#" />
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Password</legend>
        <div class="content">
          <input type="password" id="password" name="password" />
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Password repeat</legend>
        <div class="content">
          <input type="password" id="password2" name="password2" />
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>First name</legend>
        <div class="content">
          <input type="text" id="firstname" name="firstname" value="#[firstname]#" />
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Last name</legend>
        <div class="content">
          <input type="text" id="lastname" name="lastname" value="#[lastname]#" />
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Address</legend>
        <div class="content">
          <input type="text" id="address" name="address" value="#[address]#" />
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Rights</legend>
        <div class="content">
          #{rights}#
          <p>
            <input type="checkbox" id="#[name]#" name="#[name]#"#(set)#:: checked="checked"#(/set)# />
            <label for="#[name]#">#[friendlyName]# right</label>
          </p>
          #{/rights}#
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Timelimit</legend>
        <div class="content">
          <input type="text" id="tlimit" name="timelimit" value="#[timelimit]#" />
        </div>
      </fieldset>
      <fieldset class="formSection">
        <legend>Time used</legend>
        <div class="content">
          <input type="text" id="tused" name="timeused" value="#[timeused]#" />
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="content">
          <button type="submit" name="change" class="primary icon-save">Save changes</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  #%env/templates/page-end.template%#
</body>
</html>

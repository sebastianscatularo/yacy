<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>YaCy '#[clientname]#': MediaWiki Dump Import</title>
  #%env/templates/header-backend.template%#
  #(import)#::<meta http-equiv="REFRESH" content="10" />#(/import)#
</head>

<body id="indexImportMediawiki">
  <ul class="ym-skiplinks">
    <li><a class="ym-skip" href="#nav">Skip to navigation (Press Enter)</a></li>
    <li><a class="ym-skip" href="#main">Skip to main content (Press Enter)</a></li>
  </ul>

  #%env/templates/header.template%#

  <main>
    <div class="ym-wrapper">
      <div class="ym-wbox">

<div id="devInfo">
Todo:
 - error messages are not displayed?! (bug? not there? check what to do)
</div>

        #(import)#
        #(status)#::
        <div id="formResults">
          <p class="error">
            Bad input data: #[message]#
          </p>
        </div>
        #(status)#
        ::
        <h1>Import Process</h1>
        <ul>
          <li><strong>Thread::</strong> #[thread]#</li>
          <li><strong>Dump::</strong> #[dump]#</li>
          <li><strong>Processed::</strong> #[count]# Wiki Entries</li>
          <li><strong>Speed::</strong> #[speed]# articles per second</li>
          <li><strong>Running Time::</strong> #[runningHours]# hours, #[runningMinutes]# minutes</li>
          <li><strong>Remaining Time::</strong> #[remainingHours]# hours, #[remainingMinutes]# minutes</li>
        </ul>
        #(/import)#

        <h1>MediaWiki Dump Import</h1>
        #(import)#
        <h2>Process</h2>
        When the import is started, the following happens:
        <ul>
          <li>
            The dump is extracted on the fly and wiki entries are translated into <em>Dublin Core</em> data format. The output looks like this:
<code><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;surrogates xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
  &lt;record&gt;
    &lt;dc:Title&gt;&lt;![CDATA[Alan Smithee]]&gt;&lt;/dc:Title&gt;
    &lt;dc:Identifier&gt;http://de.wikipedia.org/wiki/Alan%20Smithee&lt;/dc:Identifier&gt;
    &lt;dc:Description&gt;&lt;![CDATA[Der als Filmregisseur oft genannte Alan Smithee ist ein Anagramm]]&gt;&lt;/dc:Description&gt;
    &lt;dc:Language&gt;de&lt;/dc:Language&gt;
    &lt;dc:Date&gt;2009-05-07T06:03:48Z&lt;/dc:Date&gt;
  &lt;/record&gt;
  &lt;record&gt;
    ...
  &lt;/record&gt;
&lt;/surrogates&gt;</pre></code>
          </li>
          <li>
            Each 10000 wiki records are combined in one output file which is written to <code>/DATA/SURROGATES/in</code> into a temporary file.
          </li>
          <li>
            When each of the generated output file is finished, it is renamed to a <code>.xml</code> file
          </li>
          <li>
            Each time a <abbr>xml</abbr> surrogate file appears in <code>/DATA/SURROGATES/in</code>, the YaCy indexer fetches the file and indexes the record entries.
          </li>
          <li>
            When a surrogate file is finished with indexing, it is moved to <code>/DATA/SURROGATES/out</code>
          </li>
          <li>
            You can recycle processed surrogate files by moving them from <code>/DATA/SURROGATES/out</code> to <code>/DATA/SURROGATES/in</code>
          </li>
        </ul>

        <h2>Run Import</h2>
        <form action="IndexImportMediawiki_p.html" method="get" accept-charset="UTF-8">
          <fieldset>
            <legend>MediaWiki Dump File Selection</legend>
            <div class="description">
              <p>
                You can import MediaWiki dumps here. An example is the file
                <a href="http://dumps.wikimedia.org/dewiki/latest/dewiki-latest-pages-articles.xml.bz2">http://dumps.wikimedia.org/dewiki/latest/dewiki-latest-pages-articles.xml.bz2</a>.
                <br/>
                Dumps must be in <abbr>XML</abbr> format and may be compressed in <abbr>gz</abbr> or <abbr>bz2</abbr>. Place the file in the YaCy folder or in one of its sub-folders.
                <br/>
                MediaWiki Dump File Selection: select a <abbr>XML</abbr> file (which may be <abbr>bz2</abbr>- or <abbr>gz</abbr>-encoded)
              </p>
            </div>

            <fieldset class="formSection">
              <legend>Dump File</legend>
              <div class="content">
                <input name="file" type="text" value=""/>
              </div>
            </fieldset>

            <fieldset class="formControl" data-id="formControl">
              <div class="content">
                <button name="submit" type="submit" class="icon-run primary">Import MediaWiki Dump</button>
              </div>
            </fieldset>
          </fieldset>
        </form>
        ::#(/import)#
    </div>
    </div>
  </main>
  <footer class="hidden">
    #%env/templates/footer.template%#
  </footer>
  </body>
</html>
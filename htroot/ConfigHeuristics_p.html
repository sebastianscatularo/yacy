<!DOCTYPE html>
<html lang="en">
<head>
  <title>YaCy '#[clientname]#': Heuristics Configuration</title>
  #%env/templates/header-backend.template%#
  <script type="text/javascript" src="/js/yaml/pages/configHeuristics.js"></script>
</head>

<body id="configHeuristics">
  #%env/templates/page-start.template%#

  <div id="devInfo" data-done="html5">
    - fix text where are heuristics actually displayed?
  </div>

  <h1>Heuristics Configuration</h1>
  <p>
    A <a href="http://en.wikipedia.org/wiki/Heuristic">heuristic</a> is an 'experience-based technique that help in problem solving, learning and discovery' (wikipedia). The search heuristics that can be switched on here are techniques that help the discovery of possible search results based on link guessing, in-search crawling and requests to other search engines.
    When a search heuristic is used, the resulting links are not used directly as search result but the loaded pages are indexed and stored like other content. This ensures that blacklists can be used and that the searched word actually appears on the page that was discovered by the heuristic.
  </p>
  <div class="p">
    The success of heuristics are marked with an image (<img width="16" height="9" src="/env/grafics/heuristic_redundant.gif" title="heuristic:&lt;name&gt; (redundant)" style="width:16px; height:9px;" alt="heuristic:&lt;name&gt; (redundant)"/>/<img width="16" height="9" src="/env/grafics/heuristic_new.gif" title="heuristic:&lt;name&gt; (new link)" style="width:16px; height:9px;" alt="heuristic:&lt;name&gt; (new link)"/>) below the favicon left from the search result entry:
    <ul>
      <li>
        <img width="16" height="9" src="/env/grafics/heuristic_redundant.gif" title="heuristic:&lt;name&gt; (redundant)" style="width:16px; height:9px;" alt="heuristic:&lt;name&gt; (redundant)"/>
        The search result was discovered by a heuristic, but the link was already known by YaCy
      </li>
      <li>
        <img width="16" height="9" src="/env/grafics/heuristic_new.gif" title="heuristic:&lt;name&gt; (new link)" style="width:16px; height:9px;" alt="heuristic:&lt;name&gt; (new link)"/>
        The search result was discovered by a heuristic, not previously known by YaCy
      </li>
    </ul>
  </div>

  <form id="HeuristicFormSite" method="post" action="ConfigHeuristics_p.html" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Heuristics Settings</legend>

      <fieldset class="formGroup collapsible">
        <legend>Search</legend>
        <fieldset class="formSection">
          <legend><em>site</em>-operator</legend>
          <div class="content">
            <input type="checkbox" id="instantShallowCrawl" #(site.checked)#:: checked="checked"#(/site.checked)# />
            <input type="hidden" id="instantShallowCrawlValue"/>
            <label for="instantShallowCrawl">instant shallow crawl</label>
            <p>
              When a search is made using a <code>site</code>-operator (like: <code>download site:yacy.net</code>) then the host of the site-operator is instantly crawled with a host-restricted <em>depth-1</em> crawl.
              <br/>
              That means: right after the search request the portal page of the host is loaded and every page that is linked on this page that points to a page on the same host.
              Because this <em>instant crawl</em> must obey the <code>robots.txt</code> and a minimum access time for two consecutive pages, this heuristic is rather slow, but may discover all wanted search results using a second search (after a small pause of some seconds).
            </p>
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>search-result</legend>
          <div class="content">
            <p>
              <input type="checkbox" id="shallowCrawlSearchResults" #(searchresult.checked)#:: checked="checked"#(/searchresult.checked)# />
              <input type="hidden" id="shallowCrawlSearchResultsValue"/>
              <label for="shallowCrawlSearchResults">shallow crawl on all displayed search results</label>
            </p>
            <p>
              <input type="checkbox" id="searchResultGlobal" #(searchresultglobal.checked)#:: checked="checked"#(/searchresultglobal.checked)# />
              <input type="hidden" id="searchResultGlobalValue"/>
              <label for="searchResultGlobal">add as global crawl job</label>
            </p>
            <p>
              When a search is made then all displayed result links are crawled with a <em>depth-1</em> crawl.
              <br/>
              This means: right after the search request every page is loaded and every page that is linked on this page.
              <br/>
              If you check <em>add as global crawl job</em> the pages to be crawled are added to the global crawl queue (remote peers can pickup pages to be crawled).
              <br/>
              Default is to add the links to the local crawl queue (your peer crawls the linked pages).
            </p>
          </div>
        </fieldset>
      </fieldset>

      <fieldset class="formGroup collapsible">
        <legend>External Ressources</legend>
        <fieldset class="formSection">
          <legend>Twitter</legend>
          <div class="content">
            <input type="checkbox" id="twitterCheck" #(twitter.checked)#:: checked="checked"#(/twitter.checked)# />
            <input type="hidden" id="twitterCheckValue"/>
            <label for="twitterCheck">Load external search result list from <a href="http://search.twitter.com">twitter</a></label>
            <p>
              When using this heuristic, then every search request line is used for a call to twitter.
              50 results are taken from twitter and loaded simultanously, parsed and indexed immediately.
            </p>
          </div>
        </fieldset>

        <fieldset class="formSection">
          <legend>Blekko</legend>
          <div class="content">
            <input type="checkbox" id="blekkoCheck" #(blekko.checked)#:: checked="checked"#(/blekko.checked)# />
            <input type="hidden" id="blekkoCheckValue"/>
            <label for="blekkoCheck">Load external search result list from <a href="http://blekko.com">blekko</a></label>
            <p>
              When using this heuristic, then every search request line is used for a call to blekko.
              20 results are taken from blekko and loaded simultanously, parsed and indexed immediately.
            </p>
          </div>
        </fieldset>
      </fieldset>

      <fieldset class="formGroup collapsible">
        <legend>OpenSearch</legend>
        <fieldset class="formSection">
          <legend>Activate</legend>
          <div class="content">
            <input type="checkbox" id="openSearchCheck" #(opensearch.checked)#:: checked="checked"#(/opensearch.checked)# />
            <input type="hidden" id="openSearchCheckValue"/>
            <label for="openSearchCheck">opensearch load external search result list from active systems below</label>
            <p>
              When using this heuristic, then every search request line is used for a call to listed OpenSearch systems until enough results to fill the current search page are available.
              20 results are taken from remote system and loaded simultanously, parsed and indexed immediately.
              <br/>
              To find out more about OpenSearch see <a href="http://www.opensearch.org" target="_blank">OpenSearch.org</a>.
            </p>
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Provider</legend>
          <div class="content">
            <p>
              List of available/active OpenSearch system:
            </p>
            <table class="sortable" id="providerList">
              <thead>
                <tr>
                  <th>Active</th>
                  <th>Title</th>
                  <th>Comment</th>
                  <th>Url <small>(format opensearch <a href="http://www.opensearch.org/Specifications/OpenSearch/1.1#OpenSearch_URL_template_syntax" target="_blank">Url template syntax</a>)</small></th>
                  <th>add / delete</th>
                </tr>
              </thead>
              <tbody>
                #{osdcfg}#
                <tr>
                  <td>
                    <input type="checkbox" name="ossys_#[title]#" value="checked" #(checked)#::checked="checked"#(/checked)#/>
                  </td>
                  <td>
                    <a href="#[urlhostlink]#" target="_blank">#[title]#</a>
                  </td>
                  <td>#[comment]#</td>
                  <td>
                    <input type="text" name="ossys_url_#[title]#" value="#[url]#"/>
                  </td>
                  <td>
                    <input type="checkbox" name="ossys_del_#[title]#" #(delchecked)#::checked="checked"#(/delchecked)#/>
                  </td>
                </tr>
                #{/osdcfg}#
                <tr>
                  <td><small>new</small></td>
                  <td>
                    <input type="text" name="ossys_newtitle" id="ossysNewTitle"/>
                    <div class="formHint hidden">
                      <p class="error" data-id="empty">
                        Please specify a title.
                      </p>
                    </div>
                  </td>
                  <td><input type="text" name="ossys_newcomment"/></td>
                  <td>
                    <input type="text" name="ossys_newurl" id="ossysNewUrl"/>
                    <div class="formHint hidden">
                      <p class="error" data-id="empty">
                        Please specify a URL.
                      </p>
                      <p class="error" data-id="invalid">
                        Please specify a valid URL.
                      </p>
                      <p class="error" data-id="protocol">
                        Only URLs with protocol <code>HTTP(S)</code> are allowed.
                      </p>
                    </div>
                  </td>
                  <td>
                    <button type="submit" name="addnewosd" id="addNewOsd" class="icon-add">add</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </fieldset>
      </fieldset>

      <fieldset class="formControl">
        <div class="content">
          <button type="submit" name="set" class="primary icon-run">Save Changes</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  <form action="ConfigHeuristics_p.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>OpenSearch Discovery</legend>
      <div class="description">
        <p>
          With the <em>Discover</em> action you can search within the metadata of your local index (Web Structure Index) to find systems which support the Opensearch specification.
          <br/>
          The task is started in the background. It may take some minutes before new entries appear (after refreshing the page).
          <br/>
          Alternatively you may <a href="?copydefaultosdconfig=">copy &amp; paste a example config file</a> located in <code>defaults/heuristicopensearch.conf</code> to the DATA/SETTINGS directory.
          <br/>
          For the discover function the <em>web graph</em> option of the web structure index and the fields <code>target_rel_s</code>, <code>target_protocol_s</code>, <code>target_urlstub_s</code> have to be switched on in the <a href="IndexSchema_p.html?core=webgraph">webgraph Solr schema</a>. To do this, you may use the <em>Solr Configuration</em> action.
        </p>
      </div>

      <fieldset class="formSection">
        <legend>Discover</legend>
        <div class="content">
          <button type="submit" name="discoverosd" id="discoverOsd" class="icon-run">Discover OpenSearch provider from index</button>
        </div>
      </fieldset>

      #{osdsolrfieldswitch}#
      <fieldset class="formSection">
        <legend>Solr Configuration</legend>
        <div class="content">
          <button type="submit" name="switchSolrFieldsOn" id="switchSolrFieldsOn" class="icon-config">Switch Solr fields on</button>
        </div>
      </fieldset>
      #{/osdsolrfieldswitch}#
    </fieldset>
  </form>
  #%env/templates/page-end.template%#
</body>
</html>

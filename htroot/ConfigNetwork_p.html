<!DOCTYPE html>
<html lang="en">
<head>
  <title>YaCy '#[clientname]#': Network Configuration</title>
  #%env/templates/header-backend.template%#
  <script type="text/javascript" src="/js/yaml/pages/configNetwork.js"></script>
</head>

<body id="configNetwork">
  #%env/templates/page-start.template%#

  <div id="devInfo">
    status: valid html5
  </div>

  <h1>Network Configuration</h1>
  #(commit)#
  ::
  <p class="ycu-message ycu-message-info">Accepted Changes.</p>
  ::
  <p class="ycu-message ycu-message-error">Inapplicable Setting Combination:</p>
  ::
  <p class="ycu-message ycu-message-error">No changes were made!</p>
  #(/commit)#

  #(commitDHTIsRobinson)#::
  <p class="ycu-message ycu-message-error">
    For <abbr>P2P</abbr> operation, at least <abbr>DHT</abbr> distribution or <abbr>DHT</abbr> receive (or both) must be set. You have thus defined a Robinson configuration.
  </p>
  #(/commitDHTIsRobinson)#

  #(commitDHTNoGlobalSearch)#::
  <p class="ycu-message ycu-message-error">
    Global Search in <abbr>P2P</abbr> configuration is only allowed, if index receive is switched on. You have a <abbr>P2P</abbr> configuration, but are not allowed to search other peers.
  </p>
  #(/commitDHTNoGlobalSearch)#

  #(commitRobinson)#::
  <p class="ycu-message ycu-message-info">
    For Robinson Mode, index distribution and receive is switched off.
  </p>
  #(/commitRobinson)#

  <form id="NetworkForm" method="post" action="ConfigNetwork_p.html" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Network and Domain Specification</legend>
      <div class="description">
        <p>
          YaCy can operate a computing grid of YaCy peers or as a stand-alone node.
          To control that all participants within a web indexing domain have access to the same domain,
          this network definition must be equal to all members of the same YaCy network.
        </p>
      </div>
      <fieldset class="formSection">
        <legend>Network Definition</legend>
        <div class="content">
          <select id="networkDefinition" name="networkDefinition">
            <option selected="selected">#[network.unit.definition]#</option>
            #{networks}#
            <option>#[network]#</option>
            #{/networks}#
          </select>
          <button id="addCustomUrl" class="plain icon-edit">Enter custom URL</button>
        </div>
      </fieldset>
      <fieldset class="formSection hidden" id="networkDefinitionURLfield">
        <legend>Remote Network Definition URL</legend>
        <div class="content">
          <input type="text" id="networkDefinitionURL" name="networkDefinitionURL" size="100">
        </div>
      </fieldset>
      <fieldset class="formGroup">
        <legend>Network details</legend>
        <fieldset class="formSection">
          <legend>Nick</legend>
          <div class="content">
            #[network.unit.name]#
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Description</legend>
          <div class="content">
            #[network.unit.description]#
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Indexing Domain</legend>
          <div class="content">
            #[network.unit.domain]#
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>DHT</legend>
          <div class="content">
            #[network.unit.dht]#
          </div>
        </fieldset>
      </fieldset>
      <fieldset class="formControl">
        <div class="content">
          <button type="submit" name="changeNetwork" class="primary icon-run">Change Network</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  <h2>Distributed Computing Network for Domain</h2>
  <p>
    You can configure if you want to participate at the global YaCy network or if you want to have your
    own separate search cluster with or without connection to the global network. You may also define
    a completely independent search engine instance, without any data exchange between your peer and other
    peers, which we call a <em>Robinson</em> peer.
  </p>

  <form id="ConfigForm" method="post" action="ConfigNetwork_p.html" enctype="multipart/form-data" accept-charset="UTF-8">

    <h3 class="numbered" id="confP2P">Peer-to-Peer Mode</h3>
    <fieldset class="main">
      <legend>Peer-to-Peer Mode configuration</legend>
      <fieldset class="formSection">
        <legend>Enable</legend>
        <div class="content">
          <input type="radio" name="network" id="p2p" value="p2p"#(p2p.checked)#:: checked="checked"#(/p2p.checked)# />
          <label for="p2p">Peer-to-Peer Mode</label>
        </div>
      </fieldset>
      <fieldset class="formGroup">
        <legend>Index distribution</legend>
        <fieldset class="formSection">
          <legend>Enable</legend>
          <div class="content">
            <input type="checkbox" id="indexDistribute" name="indexDistribute" #(indexDistributeChecked)#::checked="checked" #(/indexDistributeChecked)#/>
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Rules</legend>
          <div class="content">
            <p>
              This enables automated, <abbr>DHT</abbr>-ruled Index Transmission to other peers.
            </p>
            <p>
              <input type="radio" value="on" id="indexDistributeWhileCrawlingOn"
              name="indexDistributeWhileCrawling"
              #(indexDistributeWhileCrawling.on)#::checked="checked" #(/indexDistributeWhileCrawling.on)#/>
              <label for="indexDistributeWhileCrawlingOn">enabled</label> /
              <input type="radio" value="off" id="indexDistributeWhileCrawlingOff"
              name="indexDistributeWhileCrawling"
              #(indexDistributeWhileCrawling.off)#::checked="checked" #(/indexDistributeWhileCrawling.off)#/>
              <label for="indexDistributeWhileCrawlingOff">disabled during crawling</label>.
            </p>
            <p>
              <input type="radio" value="on" id="indexDistributeWhileIndexingOn"
              name="indexDistributeWhileIndexing"
              #(indexDistributeWhileIndexing.on)#::checked="checked" #(/indexDistributeWhileIndexing.on)#/>
              <label for="indexDistributeWhileIndexingOn">enabled</label> /
              <input type="radio" value="off" id="indexDistributeWhileIndexingOff"
              name="indexDistributeWhileIndexing"
              #(indexDistributeWhileIndexing.off)#::checked="checked" #(/indexDistributeWhileIndexing.off)#/>
              <label for="indexDistributeWhileIndexingOff">disabled during indexing</label>.
            </p>
          </div>
        </fieldset>
      </fieldset>

      <fieldset class="formGroup">
        <legend>Index Receive</legend>
        <fieldset class="formSection">
          <legend>Enable</legend>
          <div class="content">
            <input type="checkbox" id="indexReceive" name="indexReceive" #(indexReceiveChecked)#::checked="checked" #(/indexReceiveChecked)#/>
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Rules</legend>
          <div class="content">
            <p>
              Accept remote Index Transmissions.<br />
              This works only if you have a senior peer. The DHT-rules do not work without this function.
            </p>
            <p>
              <input type="radio" value="on" id="indexReceiveBlockBlacklistOn"
              name="indexReceiveBlockBlacklist"
              #(indexReceiveBlockBlacklistChecked.on)#::checked="checked" #(/indexReceiveBlockBlacklistChecked.on)#/>
              <label for="indexReceiveBlockBlacklistOn">reject</label> /
              <input type="radio" value="off" id="indexReceiveBlockBlacklistOff"
              name="indexReceiveBlockBlacklist"
              #(indexReceiveBlockBlacklistChecked.off)#::checked="checked" #(/indexReceiveBlockBlacklistChecked.off)#/>
              <label for="indexReceiveBlockBlacklistOff">accept transmitted URLs that match your blacklist</label>.
            </p>
            <p>
              <input type="radio" value="on" id="indexReceiveSearchOn"
              name="indexReceiveSearch"
              #(indexReceiveSearchChecked)#::checked="checked"#(/indexReceiveSearchChecked)#/>
              <label for="indexReceiveSearchOn">allow</label> /
              <input type="radio" value="off" id="indexReceiveSearchOff"
              name="indexReceiveSearch"
              #(indexReceiveSearchChecked)#checked="checked"::#(/indexReceiveSearchChecked)#/>
              <label for="indexReceiveSearchOff">deny remote search</label>.
            </p>
          </div>
        </fieldset>
      </fieldset>
      <fieldset class="formControl">
        <div class="content">
          <button type="submit" name="save" class="primary icon-save">Save configuration</button>
        </div>
      </fieldset>
    </fieldset>

    <h3 id="confRobinson" class="numbered">Robinson Mode</h3>
    <p>
      If your peer runs in <em>Robinson Mode</em> you run YaCy as a search engine for your own search portal without data exchange to other peers.
      There is no index receive and no index distribution between your peer and any other peer.
      In case of Robinson-clustering there can be acceptance of remote crawl requests from peers of that cluster.
    </p>
    <fieldset class="main">
      <legend>Robinson Mode</legend>
      <fieldset class="formSection">
        <legend>Enable</legend>
        <div class="content">
          <input type="radio" name="network" id="robinson" value="robinson"#(robinson.checked)#:: checked="checked"#(/robinson.checked)# />
          <label for="robinson">Robinson Mode</label>
        </div>
      </fieldset>
      <fieldset class="formGroup">
        <legend>Peer type</legend>
        <fieldset class="formSection">
          <legend>Private Peer</legend>
          <div class="content">
            <input type="radio" id="privatepeer" value="privatepeer" name="cluster.mode"
            #(privatepeerChecked)#::checked="checked" #(/privatepeerChecked)#/>
            <label for="privatepeer">
              Your search engine will not contact any other peer, and will reject every request.
            </label>
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Public Peer</legend>
          <div class="content">
            <input type="radio" value="publicpeer" id="publicpeer" name="cluster.mode"
            #(publicpeerChecked)#::checked="checked" #(/publicpeerChecked)#/>
            <label for="privatepeer">
              Your peer is visible to other peers and contact them to distribute it's presence.
            </label>
            <p>
              Your peer does not accept any outside index data, but responds on all remote search requests.
            </p>
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Public Cluster</legend>
          <div class="content">
            <input type="radio" value="publiccluster" id="publiccluster" name="cluster.mode"
            #(publicclusterChecked)#::checked="checked" #(/publicclusterChecked)#/>
            <label for="privatepeer">
              Your peer is part of a public cluster within the YaCy network.
            </label>
            <p>
              Index data is not distributed, but remote crawl requests are distributed and accepted.
              <br />
              Search requests are spread over all peers of the cluster, and answered from all peers of the cluster.
            </p>
            <div class="p">
              List of .yacy or .yacyh - domains of the cluster: <em>(comma-separated)</em><br />
              <input type="text" name="cluster.peers.yacydomain" id="clusterPeersYacyDomain" value="#[cluster.peers.yacydomain]#" size="80" maxlength="800" />
              <div class="formHint hidden">
                <p class="error" data-id="empty">
                  You must specify a valid peer name.
                </p>
                <p class="error" data-id="invalid">
                  Please enter a comma separated list of <code>.yacy</code> and/or <code>.yacyh</code> domains.
                </p>
              </div>
              <br/>
              <em>Peer Hashes:</em> <code>#[cluster.peers.yacydomain.hashes]#</code>
            </div>
          </div>
        </fieldset>
        <fieldset class="formSection">
          <legend>Peer Tags</legend>
          <div class="content">
            <p>
              When you allow access from the YaCy network, your data is recognized using keywords.
              Please describe your search portal with some keywords (comma-separated).
              <br />
              If you leave the field empty, no peer asks your peer. If you fill in a <code>*</code>, your peer is always asked.
            </p>
            <input type="text" id="peertags" name="peertags" value="#[peertags]#" maxlength="80" />
          </div>
        </fieldset>
      </fieldset>
      <fieldset class="formControl">
        <div id="ycu-error-count-robinson" class="description hiddden"></div>
        <div class="content">
          <button type="submit" name="save" id="submitRobinson" class="primary icon-save">Save configuration</button>
        </div>
      </fieldset>
    </fieldset>
  </form>
  #%env/templates/page-end.template%#
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <title>YaCy '#[clientname]#': Performance Settings of Queues and Processes</title>
  #%env/templates/header-backend.template%#
  <script type="text/javascript" src="/js/yaml/tablesorter/jquery.tablesorter.min.js"></script>
  <!--<script type="text/javascript" src="js/html.js"></script>-->
</head>

<body id="performanceQueues">
  #%env/templates/page-start.template%#

  <h1>Performance Settings of Queues and Processes</h1>

  <form action="PerformanceQueues_p.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Scheduled tasks overview and waiting time settings</legend>
      <fieldset class="formSection">
        <div class="content noIndent">
          <table class="sortable">
            <tr>
              <thead>
                <th>Thread</th>
                <th>Queue Size</th>
                <th colspan="2">Total Block Time</th>
                <th colspan="2">Total Sleep Time</th>
                <th colspan="2">Total Exec Time</th>
                <th>Total Cycles</th>
                <th>Idle Cycles</th>
                <th>Busy Cycles</th>
                <th>Short Mem Cycles</th>
                <th>Sleep Time per Cycle (millis)</th>
                <th>Exec Time per Busy-Cycle (millis)</th>
                <th>Memory Use per Busy-Cycle (kbytes)</th>
                <th>Delay between idle loops</th>
                <th>Delay between busy loops</th>
                <th>Minimum of Required Memory</th>
                <th class="noSort">Full Description</th>
              </thead>
              <tbody>
              </tr>
              #{table}#
              <tr class="TableCellDark">
                <td>#(hasurl)##[shortdescr]#::<a href="#[url]#">#[shortdescr]#</a>#(/hasurl)#</td>
                <td align="right">#[queuesize]#</td>
                <td align="right">#[blocktime]#&nbsp;sec</td>
                <td align="right">#[blockpercent]#%</td>
                <td align="right">#[sleeptime]#&nbsp;sec</td>
                <td align="right">#[sleeppercent]#%</td>
                <td align="right">#[exectime]#&nbsp;sec</td>
                <td align="right">#[execpercent]#%</td>
                <td align="right">#[totalcycles]#</td>
                <td align="right">#[idlecycles]#</td>
                <td align="right">#[busycycles]#</td>
                <td align="right">#[memscycles]#</td>
                <td align="right">#[sleeppercycle]#</td>
                <td align="right">#[execpercycle]#</td>
                <td align="right">#[memusepercycle]#</td>
                <td align="right">
                  <input name="#[threadname]#_idlesleep" size="7" maxlength="7" value="#[idlesleep]#" #(disabled)#:: disabled="disabled"#(/disabled)# /> milliseconds
                </td>
                <td align="right">
                  <input name="#[threadname]#_busysleep" size="7" maxlength="7" value="#[busysleep]#" #(disabled)#:: disabled="disabled"#(/disabled)# /> milliseconds
                </td>
                <td align="right">
                  <input name="#[threadname]#_memprereq" size="7" maxlength="10" value="#[memprereq]#" #(disabled)#:: disabled="disabled"#(/disabled)# /> kbytes
                </td>
                <td align="left">
                  #[longdescr]##(recommendation)#::<br/>recommended: #[value]# kbytes#(/recommendation)#
                </td>
              </tr>
              #{/table}#
            </tbody>
          </table>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="description">
          <p>
            <s class="sym sym-hint"></s>
            Changes take effect immediately.
          </p>
        </div>
        <div class="content">
          <button type="submit" name="submitdelay" class="primary icon-run"/>Submit New Delay Values</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  <form action="PerformanceQueues_p.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Cache Settings</legend>
      <fieldset class="formSection">
        <div class="content noIndent">
          <table class="sortable">
            <thead>
              <tr valign="top" class="TableHeader">
                <th>Type</th>
                <th><abbr>RAM</abbr> Cache</th>
                <th class="noSort">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td>Words in <abbr>RAM</abbr> cache:<br />(Size in <abbr>KBytes</abbr>)</td>
                <td>#[wordCacheSize]#<br />(#[wordCacheSizeKBytes]# <abbr>KB</abbr>)</td>
                <td>
                  This is the current size of the word caches.
                  The indexing cache speeds up the indexing process, the <abbr>DHT</abbr> cache holds indexes temporary for approval.
                  The maximum of this caches can be set below.
                </td>
              </tr>
              <tr valign="top">
                <td>Maximum <abbr>URLs</abbr> currently assigned to one cached word:</td>
                <td>#[maxURLinCache]#</td>
                <td>
                  This is the maximum size of <abbr>URLs</abbr> assigned to a single word cache entry.
                  If this is a big number, it shows that the caching works efficiently.
                </td>
              </tr>
              <tr valign="top">
                <td>Maximum age of a word:</td>
                <td>#[maxAgeOfCache]#</td>
                <td>
                  This is the maximum age of a word in an index in minutes.
                </td>
              </tr>
              <tr valign="top">
                <td>Minimum age of a word:</td>
                <td>#[minAgeOfCache]#</td>
                <td>
                  This is the minimum age of a word in an index in minutes.
                </td>
              </tr>
              <tr valign="top">
                <td>Maximum number of words in cache:</td>
                <td>
                  <input name="wordCacheMaxCount" type="text" size="10" maxlength="100" value="#[wordCacheMaxCount]#" />
                </td>
                <td>
                  This is is the number of word indexes that shall be held in the
                  <abbr>RAM</abbr> cache during indexing. When YaCy is shut down, this cache must be
                  flushed to disk; this may last some minutes.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="description">
          <p>
            <s class="sym sym-hint"></s>
            Changes take effect immediately.
          </p>
        </div>
        <div class="content">
          <button type="submit" name="cacheSizeSubmit" class="primary icon-run"/>Submit New Cache Size</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  <form action="PerformanceQueues_p.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Thread Pool Settings</legend>
      <fieldset class="formSection">
        <div class="content noIndent">
          <table>
            <thead>
              <tr valign="bottom">
                <th>Thread Pool</th>
                <th>maximum Active</th>
                <th>current Active</th>
              </tr>
            </thead>
            <tbody>
              #{pool}#
              <tr>
                <td>#[name]#</td>
                <td align="right">
                  <input name="#[name]#_maxActive" type="text" size="8" maxlength="8" value="#[maxActive]#" />
                </td>
                <td align="right">#[numActive]#</td>
              </tr>
              #{/pool}#
            </tbody>
          </table>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="description">
          <p>
            <s class="sym sym-hint"></s>
            Changes take effect immediately.
          </p>
        </div>
        <div class="content">
          <button type="submit" name="poolConfig" class="primary icon-run"/>Enter new Threadpool Configuration</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  #%env/templates/page-end.template%#
</body>
</html>

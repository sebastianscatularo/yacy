<!DOCTYPE html>
<html lang="en">
<head>
  <title>YaCy '#[clientname]#': Performance Settings of Queues and Processes</title>
  #%env/templates/header-backend.template%#
  <script type="text/javascript" src="/js/yaml/tablesorter/jquery.tablesorter.min.js"></script>
  <script type="text/javascript" src="/js/yaml/pages/performanceQueues.js"></script>
</head>

<body id="performanceQueues">
  #%env/templates/page-start.template%#

  <div id="devInfo">
    status: valid html5
  </div>

  <h1>Performance Settings of Queues and Processes</h1>

  <form action="PerformanceQueues_p.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Scheduled tasks overview and waiting time settings</legend>
      <fieldset class="formSection">
        <div class="content noIndent">
          <table class="sortable">
            <thead>
              <tr>
                <th>Thread</th>
                <th>Queue Size</th>
                <th colspan="2">Total Block Time</th>
                <th colspan="2">Total Sleep Time</th>
                <th colspan="2">Total Exec Time</th>
                <th>Total Cycles</th>
                <th>Idle Cycles</th>
                <th>Busy Cycles</th>
                <th>Short Mem Cycles</th>
                <th>Sleep Time per Cycle (millis)</th>
                <th>Exec Time per Busy-Cycle (millis)</th>
                <th>Memory Use per Busy-Cycle (kbytes)</th>
                <th>Delay between idle loops</th>
                <th>Delay between busy loops</th>
                <th>Minimum of Required Memory</th>
                <th class="noSort">Full Description</th>
              </tr>
            </thead>
            <tbody>
              #{table}#
              <tr>
                <td>#(hasurl)##[shortdescr]#::<a href="#[url]#">#[shortdescr]#</a>#(/hasurl)#</td>
                <td>#[queuesize]#</td>
                <td>#[blocktime]#&nbsp;sec</td>
                <td>#[blockpercent]#%</td>
                <td>#[sleeptime]#&nbsp;sec</td>
                <td>#[sleeppercent]#%</td>
                <td>#[exectime]#&nbsp;sec</td>
                <td>#[execpercent]#%</td>
                <td>#[totalcycles]#</td>
                <td>#[idlecycles]#</td>
                <td>#[busycycles]#</td>
                <td>#[memscycles]#</td>
                <td>#[sleeppercycle]#</td>
                <td>#[execpercycle]#</td>
                <td>#[memusepercycle]#</td>
                <td>
                  <input name="#[threadname]#_idlesleep" size="7" maxlength="7" value="#[idlesleep]#" #(disabled)#:: disabled="disabled"#(/disabled)# /> milliseconds
                </td>
                <td>
                  <input name="#[threadname]#_busysleep" size="7" maxlength="7" value="#[busysleep]#" #(disabled)#:: disabled="disabled"#(/disabled)# /> milliseconds
                </td>
                <td>
                  <input name="#[threadname]#_memprereq" size="7" maxlength="10" value="#[memprereq]#" #(disabled)#:: disabled="disabled"#(/disabled)# /> kbytes
                </td>
                <td>
                  #[longdescr]##(recommendation)#::<br/>recommended: #[value]# kbytes#(/recommendation)#
                </td>
              </tr>
              #{/table}#
            </tbody>
          </table>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="description">
          <p>
            <s class="sym sym-hint"></s>
            Changes take effect immediately.
          </p>
        </div>
        <div class="content">
          <button type="submit" name="submitdelay" class="primary icon-run">Submit New Delay Values</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  <form action="PerformanceQueues_p.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Cache Settings</legend>
      <fieldset class="formSection">
        <div class="content noIndent">
          <table class="sortable">
            <thead>
              <tr>
                <th>Type</th>
                <th><abbr>RAM</abbr> Cache</th>
                <th class="noSort">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Words in <abbr>RAM</abbr> cache<br/><em>(Size in <abbr>KBytes</abbr>)</em></td>
                <td>#[wordCacheSize]#<br />(#[wordCacheSizeKBytes]# <abbr>KB</abbr>)</td>
                <td>
                  This is the current size of the word caches.
                  The indexing cache speeds up the indexing process, the <abbr>DHT</abbr> cache holds indexes temporary for approval.
                  The maximum of this caches can be set below.
                </td>
              </tr>
              <tr>
                <td>Maximum <abbr>URLs</abbr> currently assigned to one cached word</td>
                <td>#[maxURLinCache]#</td>
                <td>
                  This is the maximum size of <abbr>URLs</abbr> assigned to a single word cache entry.
                  If this is a big number, it shows that the caching works efficiently.
                </td>
              </tr>
              <tr>
                <td>Maximum age of a word</td>
                <td>#[maxAgeOfCache]#</td>
                <td>
                  This is the maximum age of a word in an index in minutes.
                </td>
              </tr>
              <tr>
                <td>Minimum age of a word</td>
                <td>#[minAgeOfCache]#</td>
                <td>
                  This is the minimum age of a word in an index in minutes.
                </td>
              </tr>
              <tr>
                <td>Maximum number of words in cache</td>
                <td>
                  <input name="wordCacheMaxCount" id="wordCacheMaxCount" placeholder="20000" type="text" maxlength="100" size="10" value="#[wordCacheMaxCount]#" class="spinner"/>
                  <div class="formHint hidden">
                    <p class="warning">
                      Using the default value <code>20.000</code>.
                    </p>
                    <p class="error">
                      Please enter only digits (<code>0&mdash;9</code>).
                    </p>
                  </div>
                </td>
                <td>
                  This is is the number of word indexes that shall be held in the
                  <abbr>RAM</abbr> cache during indexing. When YaCy is shut down, this cache must be
                  flushed to disk; this may last some minutes.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="description">
          <p>
            <s class="sym sym-hint"></s>
            Changes take effect immediately.
          </p>
        </div>
        <div id="ycu-error-count-cache-size" class="description hiddden"></div>
        <div class="content">
          <button type="submit" name="cacheSizeSubmit" id="submitCacheSize" class="primary icon-run">Submit New Cache Size</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  <form action="PerformanceQueues_p.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Thread Pool Settings</legend>
      <fieldset class="formSection">
        <div class="content noIndent">
          <table>
            <thead>
              <tr>
                <th>Thread Pool</th>
                <th>maximum Active</th>
                <th>current Active</th>
              </tr>
            </thead>
            <tbody>
              #{pool}#
              <tr>
                <td>#[name]#</td>
                <td>
                  <input name="#[name]#_maxActive" type="text" maxlength="8" value="#[maxActive]#" class="spinner"/>
                  <div class="formHint hidden">
                    <p class="warning">
                      Using the default value for this field.
                    </p>
                    <p class="error">
                      Please enter only digits (<code>0&mdash;9</code>).
                    </p>
                  </div>
                </td>
                <td>#[numActive]#</td>
              </tr>
              #{/pool}#
            </tbody>
          </table>
        </div>
      </fieldset>
      <fieldset class="formControl">
        <div class="description">
          <p>
            <s class="sym sym-hint"></s>
            Changes take effect immediately.
          </p>
        </div>
        <div id="ycu-error-count-pool-config" class="description hiddden"></div>
        <div class="content">
          <button type="submit" name="poolConfig" id="submitPoolConfig" class="primary icon-run">Enter new Threadpool Configuration</button>
        </div>
      </fieldset>
    </fieldset>
  </form>

  #%env/templates/page-end.template%#
</body>
</html>

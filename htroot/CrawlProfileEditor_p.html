<!DOCTYPE html>
<html lang="en">
<head>
  <title>YaCy '#[clientname]#': Crawl Profile Editor</title>
  #%env/templates/header-backend.template%#
</head>

<body id="crawlProfileEditor">
  #%env/templates/page-start.template%#
  <h1>Crawler Steering</h1>
	<h2>Crawl Scheduler</h2>
  <p>Scheduled Crawls can be modified in this table</p>

  <iframe src="Table_API_p.html?inline=true&amp;filter=crawler" scrolling="no" class="autoSize"></iframe>

	<h2>Crawl Profile Editor</h2>
  <p>Crawl profiles hold information about a crawl process that is currently ongoing.</p>

  <!-- crawl profile list -->
  <form action="CrawlProfileEditor_p.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
    <fieldset>
      <legend>Crawl Profile List</legend>
      <table summary="A list of crawl profiles and their current settings.">
        <thead>
          <tr>
            <th>Crawl Thread</th>
            <th>Status</th>
            <th>Depth</th>
            <th>Must Match</th>
            <th>Must Not Match</th>
            <th>MaxAge</th>
            <th>Domain Counter Content</th>
            <th>Max Page Per Domain</th>
            <th>Accept <code>?</code> URLs</th>
            <th>Fill Proxy Cache</th>
            <th>Local Text Indexing</th>
            <th>Local Media Indexing</th>
            <th>Remote Indexing</th>
          </tr>
        </thead>
        <tbody>
          #{crawlProfiles}#
          <tr>
            <td class="breakAll">#[name]#</td>
            <td>#(terminateButton)#::
              <div style="text-decoration:blink;">Running</div>
              <input type="hidden" name="handle" value="#[handle]#" />
              <input type="submit" name="terminate" value="Terminate"/>
              #(/terminateButton)#
              #(deleteButton)#::
              Finished
              <input type="hidden" name="handle" value="#[handle]#" />
              <input type="submit" name="delete" value="Delete"/>
              #(/deleteButton)#
            </td>
            <td>#[depth]#</td>
            <td>#[mustmatch]#</td>
            <td>#[mustnotmatch]#</td>
            <td>#[crawlingIfOlder]#</td>
            <td>#{crawlingDomFilterContent}##[item]#<br />#{/crawlingDomFilterContent}#</td>
            <td>#[crawlingDomMaxPages]#</td>
            <td>#(withQuery)#no::yes#(/withQuery)#</td>
            <td>#(storeCache)#no::yes#(/storeCache)#</td>
            <td>#(indexText)#no::yes#(/indexText)#</td>
            <td>#(indexMedia)#no::yes#(/indexMedia)#</td>
            <td>#(remoteIndexing)#no::yes#(/remoteIndexing)#</td>
          </tr>
          #{/crawlProfiles}#
        </table>
        #(existPassiveCrawls)#::
        <input type="submit" name="deleteTerminatedProfiles" value="Delete finished crawls" />
        #(/existPassiveCrawls)#
      </fieldset>
    </form>

    <!-- crawl profile editor -->
    <form action="CrawlProfileEditor_p.html#edit" method="post" enctype="multipart/form-data" accept-charset="UTF-8" #(profiles)#class="hidden"::#(/profiles)#>
      <fieldset>
        <legend>Profile Editor</legend>
        <fieldset class="formSection">
          <legend>Select the profile to edit</legend>
          <div class="content">
            <select name="handle">
              #{profiles}#
              <option value="#[handle]#"#(selected)#:: selected="selected"#(/selected)#>#[name]#</option>#{/profiles}#
            </select>
            <input type="submit" name="edit" value="Edit profile" class="submitready"/>
          </div>
        </fieldset>
      </fieldset>
    </form>

    <a name="edit"></a>
    #(error)#::
    <p class="error">An error occurred during editing the crawl profile: #[message]#</p>
    #(/error)#

    #(edit)#::
    <form action="/CrawlProfileEditor_p.html#edit" method="post" enctype="multipart/form-data" accept-charset="UTF-8">
      <fieldset>
        <legend>Edit Profile: #[name]#</legend>
        <input type="hidden" name="handle" value="#[handle]#" />
        #{entries}#
        <fieldset class="formSection">
          <legend>#(readonly)#<label for="#[name]#">#[label]#</label>::#[label]##(/readonly)#</legend>
          <div class="content">
            #(readonly)#
            <input id="#[name]#" name="#[name]#"
            #(type)# type="checkbox"#(checked)#:: checked="checked"#(/checked)#::
            type="text" value="#[value]#" size="120" maxlength="10000"::
            type="text" value="#[value]#" size="120" maxlength="10000"#(/type)# />::
            <strong>#(type)##(checked)#false::true#(/checked)#::#[value]#::#[value]##(/type)#</strong>#(/readonly)#
          </div>
        </fieldset>
        #{/entries}#
        <fieldset class="formControl">
          <div class="content">
            <button type="submit" name="submit" class="icon-run primary">Submit changes</button>
          </div>
        </fieldset>
      </fieldset>
    </form>
    #(/edit)#
    #%env/templates/page-end.template%#
  </body>
</html>